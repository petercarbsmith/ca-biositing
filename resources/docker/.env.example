# PostgreSQL Connection Settings
# ---
# Configuration for BioCirV ETL database and services

# 1. Individual Connection Parameters
# These are used by docker-compose to initialize the PostgreSQL container.
POSTGRES_HOST=${POSTGRES_HOST:-db}
POSTGRES_USER=biocirv_user
POSTGRES_DB=biocirv_db
POSTGRES_PASSWORD=biocirv_dev_password

# 2. Host Port Mapping
# This is the port on your local machine that will connect to the container's port 5432.
POSTGRES_PORT=5432

# 3. Application Database URL
# This is the full connection string used by the Python application (e.g., SQLAlchemy, Alembic)
# to connect to the database container.
# Note:
#   - It uses the service name 'db' as the host, which is how containers talk to each other.
#   - It uses the internal port '5432', not the host port.
DATABASE_URL=postgresql+psycopg2://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/biocirv_db

# 4. Prefect Settings
# Prefect API URL for workers and flows
# Note: Use 'localhost' when running flows from the host machine (e.g., via pixi run run-etl)
#       Use '0.0.0.0' or 'prefect-server' when running from within containers
PREFECT_API_URL=http://localhost:4200/api
PREFECT_UI_API_URL=http://localhost:4200/api

# 5. Prefect Database Settings
# Prefect server uses PostgreSQL for persistence
PREFECT_API_DATABASE_CONNECTION_URL=postgresql+asyncpg://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/prefect_db

# 6. USDA NASS API Settings
# ---
# API key for accessing USDA agricultural data
# Get your free API key at: https://quickstats.nass.usda.gov/api
# Steps to register:
#   1. Go to https://quickstats.nass.usda.gov/api
#   2. Fill out the form with a valid email address
#   3. USDA will email you the API key immediately
#   4. Copy the key below
USDA_NASS_API_KEY=your_api_key_here
